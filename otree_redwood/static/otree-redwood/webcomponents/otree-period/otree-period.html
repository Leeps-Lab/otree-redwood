<link
	rel="import"
	href="/static/bower_components/polymer/polymer.html" />
<link rel="import" href="/static/otree-redwood/webcomponents/otree-constants/otree-constants.html">
<link
    rel="import"
    href="/static/otree-redwood/webcomponents/otree-channel/otree-channel.html" />


<dom-module id="otree-period">

	<template>
        <otree-constants id="constants"
        	debug="{{ debug }}">
        </otree-constants>
    	<otree-channel
    		channel="state"
    		on-event="_handleStateEvent">
	    </otree-channel>
        <template is="dom-if" if="[[ debug ]]">
        	<div class="well">
	        	<p>Running: [[ running ]]</p>
        	</div>
        </template>
	</template>

	<script>
		Polymer({
			is: 'otree-period',
			properties: {
				running: {
					type: Boolean,
					value: false,
					notify: true
				}
			},
			_handleStateEvent(event) {
				const state = event.detail.payload;
				if (state == 'period_start') {
					this.running = true;
				}
			},
			_handlePeriodEndEvent(event) {
				const state = event.detail.payload;
				if (state == 'period_end') {
					this.running = false;
				}
			}
		});
	</script>

</dom-module>
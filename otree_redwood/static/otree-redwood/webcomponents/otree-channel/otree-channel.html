<link
		rel="import"
		href="/static/bower_components/polymer/polymer.html" />

<link
	rel="import" 
	href="/static/otree-redwood/webcomponents/otree-events/otree-events.html">

<dom-module id="otree-channel">

	<template>
		<otree-events
			id="events"
			on-event="_handleEvent">
		</otree-channel>
	</template>

	<script>

		Polymer({
			is: 'otree-channel',
			properties: {
				channel: {
					type: String
				},
				data: {
					type: Object,
					notify: true
				}
			},
			observers: [
				'_handleDataChange(data, data.*)'
			],
			_handleEvent(event) {
				if (event.channel === this.channel) {
					this.data = event;
				}
			},
			_handleDataChange() {
				this.$.events.send(this.channel, this.data);
			}
		});
	</script>

</dom-module>

<link
		rel="import"
		href="/static/bower_components/polymer/polymer.html" />


<!--
	
`<otree-constants>` binds oTree template variables to itself.

It's useful to have an easy way to access oTree template variables in JavaScript
without double-curly brackets everywhere (e.g. "{{ }}"). Also, using JavaScript
variables makes it possible to test your JavaScript in a more isolated way than
running a full experiment.

`<otree-constants>` requires you to include a small bit of code to set useful
variables from the oTree template. You can access these either from JavaScript
by using the "oTree" object, or with the otree-constants tag itself.

`<otree-constants>` is used by most of the other webcomponents, so this block is
required in any template using the otree-redwood components:

```
<script>
 	var oTree = oTree || {};
   (function() {
     oTree.group = parseInt("{{ player.group.pk }}");
     oTree.group = isNaN(oTree.group) ? null : oTree.group;
     oTree.role = "{{ player.role }}";
     oTree.participantCode = "{{ player.participant.code }}";
     oTree.appName = "{{ subsession.app_name }}";
     oTree.idInGroup = "{{ player.id_in_group }}";
     oTree.csrfToken = "{{ csrf_token }}";
     {% if view.is_debug %}
     oTree.debug = true;
     {% else %}
     oTree.debug = false;
     {% endif %}
   })();
 </script>
 ```

https://otree-redwood.readthedocs.io/webcomponents.html

-->
<dom-module id="otree-constants">

	<template>
	</template>

	<script>
		Polymer({
			is: 'otree-constants',
			properties: {
				/** Group primary key, e.g. {{ player.group.pk }} */
				group: {
					type: Number,
					notify: true,
					readonly: true,
					value: () => {
						return oTree.group;
					}
				},
				/** Player's role, e.g. {{ player.role }} */
				role: {
					type: String,
					notify: true,
					readonly: true,
					value: () => {
						return oTree.role;
					}
				},
				/** Participant's unique subject code,
						e.g. {{ player.participant.code }}
				*/
				participantCode: {
					type: String,
					notify: true,
					readonly: true,
					value: () => {
						return oTree.participantCode;
					}
				},
				/** Current app name, e.g. {{ subsession.app_name }} */
				appName: {
					type: String,
					notify: true,
					readonly: true,
					value: () => {
						return oTree.appName;
					}
				},
				/** Player's index in group. e.g. {{ player.id_in_group }} */
				idInGroup: {
					type: String,
					notify: true,
					readonly: true,
					value: () => {
						return oTree.idInGroup;
					}
				},
				/** {{ csrf_token }} */
				csrfToken: {
					type: String,
					notify: true,
					readonly: true,
					value: () => {
						return oTree.csrf_token;
					}
				},
				/** True if the DEBUG environment variable is set. */
				debug: {
					type: Boolean,
					notify: true,
					readonly: true,
					value: () => {
						return oTree.debug;
					}
				}
			}
		});
	</script>

</dom-module>